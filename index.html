<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTML5 Boilerplate</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <h1>Behavioral Biometric Test Site</h1>
  <input id="input-box" aria-label="Enter text" value="Nothing" />
  <input id="input-box2" aria-label="Enter text" value="Nothing" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script src="scripts/script1.js"></script>
  <!-- <script src="scripts/worker.js"></script> -->
  <!-- <script>
    // Worker script as a Blob
    const workerScript = `
        self.onmessage = (event) => {
          if (event.data === 'initialize') {
              // Retrieve the port from the message
              const port = event.ports[0];

              // Listen for messages on the port
              port.onmessage = (event) => {
                  // const pageX = event.data;
                  // var script = document.createElement('script');
                  // script.src = x+y;
                  console.log(JSON.stringify(event));

                  // Send a response back to the main page
                  port.postMessage("Received the event");
              };

              // Send an initial message back to the main page
              port.postMessage('Worker initialized and ready.');
          }
      };
    `;
    if (window.Worker) {
    // Create a new MessageChannel
   // Create a Blob URL for the worker script
   const blob = new Blob([workerScript], { type: 'application/javascript' });
    const workerUrl = URL.createObjectURL(blob);

    // Create the worker
    const worker = new Worker(workerUrl);

    // Create a MessageChannel
    const channel = new MessageChannel();

    // Send one of the ports to the worker
    worker.postMessage('initialize', [channel.port1]);

    // Listen for messages from the worker
    channel.port2.onmessage = (event) => {
        console.log('Message received from worker:', event.data);
        var script = document.createElement('script');
        script.src = event.data;
    };

     // Add an event listener for click events
     document.addEventListener('click', (event) => {
        const {pageX, pageY, clientX, clientY} = event;
        const clickData = { x: pageX, y: pageY };

        // Send click coordinates to the worker via the port
        // channel.port2.postMessage(pageX+ "test");
        // console.log('1');
        // channel.port2.postMessage(pageX);
        // console.log('1');
        // console.log('2');
        // channel.port2.postMessage(JSON.stringify(clickData));
        // console.log('2');
        // console.log('3');
        // channel.port2.postMessage(clickData);
        // console.log('3');
        const obj = new Object();
        obj[clientX] = pageX;
        obj[clientY] = { x: clientX, y: clientY };
        console.log('4');
        console.log(JSON.stringify(obj))
        channel.port2.postMessage(obj);
        console.log('4');
        let arr = [clientX, clientY];
        console.log('5');
        channel.port2.postMessage(arr);
        console.log('5');
        let arr2 = [obj, pageX, obj];
        console.log('6');
        channel.port2.postMessage(arr2);
        console.log('6');
        // console.log('7');
        // channel.port2.postMessage(region);
        // console.log('7');

    });

} else {
    console.error('Your browser doesn\'t support web workers.');
}
</script> -->

</body>

</html>
